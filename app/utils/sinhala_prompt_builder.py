# app/utils/sinhala_prompt_builder.py
 
from typing import Optional
 
def build_qa_prompt(context: str, count: int, query: Optional[str] = None) -> str:
    query_part = f"‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏: {query}\n\n" if query else ""
 
    return f"""
‡∂î‡∂∂‡∂ß ‡∂¥‡∑Ñ‡∂≠ **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂¥‡∑è‡∂©‡∂∏‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä** ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠.
‡∂∏‡∑ô‡∂∏ ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫ ‡∂∏‡∂≠ ‡∂¥‡∂Ø‡∂±‡∂∏‡∑ä‡∑Ä ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± {count}‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î {count}‡∂ö‡∑ä ‡∑É‡∑è‡∂Ø‡∂±‡∑ä‡∂±.
 
{query_part}üîí **‡∂±‡∑í‡∂∫‡∂∏:**
1. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫‡∑ö ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä** ‡∂á‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
2. ‡∂±‡∑Ä ‡∂ö‡∂ª‡∑î‡∂´‡∑î, ‡∑Ä‡∑ô‡∑Ö‡∂≥ ‡∂±‡∑è‡∂∏, ‡∂±‡∂ú‡∂ª, ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑ì‡∂∏‡∑ä ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∑è ‡∂±‡∑ú‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.
3. ‡∑É‡∑ë‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ö‡∑ä‡∂∏ ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫‡∂ß ‡∑É‡∑ò‡∂¢‡∑î‡∑Ä ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.
4. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä ‡∑Ä‡∂Ω ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂ú‡∑ê‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∂± ‡∂±‡∑ú‡∂ö‡∂ª‡∂±‡∑ä‡∂±**.
 
üìö **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä:**
{context}
 
**‡∂Ü‡∂ö‡∑ò‡∂≠‡∑í‡∂∫:**
1. ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫: ...
   ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: ...
(‡∂∏‡∑ô‡∂Ω‡∑ô‡∑É {count}‡∂ö‡∑ä)
"""
 