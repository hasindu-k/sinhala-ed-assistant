def build_qa_prompt(context: str, count: int, query: str = "") -> str:
    query_part = f"‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏: {query}\n\n" if query else ""
    
    return f"""
‡∂î‡∂∂‡∂ß ‡∂¥‡∑Ñ‡∂≠ **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂¥‡∑è‡∂©‡∂∏‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä** ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠. 
‡∂∏‡∑ô‡∂∏ ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫ ‡∂∏‡∂≠ ‡∂¥‡∂Ø‡∂±‡∂∏‡∑ä‡∑Ä ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± {count}‡∂ö‡∑ä ‡∑É‡∑Ñ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î {count}‡∂ö‡∑ä ‡∑É‡∑è‡∂Ø‡∂±‡∑ä‡∂±.

{query_part}
üîí **‡∂±‡∑í‡∂∫‡∂∏:**
1. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫‡∑ö ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä** ‡∂á‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
2. ‡∂±‡∑Ä ‡∂ö‡∂ª‡∑î‡∂´‡∑î, ‡∑Ä‡∑ô‡∑Ö‡∂≥ ‡∂±‡∑è‡∂∏, ‡∂±‡∂ú‡∂ª, ‡∑É‡∑í‡∂Ø‡∑î‡∑Ä‡∑ì‡∂∏‡∑ä ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∑è ‡∂±‡∑ú‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.
3. ‡∑É‡∑ë‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ö‡∑ä‡∂∏ ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫‡∂ß ‡∑É‡∑ò‡∂¢‡∑î‡∑Ä ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.
4. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä ‡∑Ä‡∂Ω ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂ú‡∑ê‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂±‡∑ú‡∂ö‡∂ª‡∂±‡∑ä‡∂±**.

**‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä:**
{context}

**‡∂Ü‡∂ö‡∑ò‡∂≠‡∑í‡∂∫:**
1. ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫: [‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫]
   ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: [‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª]
2. ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫: [‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫]
   ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: [‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª]
(‡∂∏‡∑ô‡∂Ω‡∑ô‡∑É {count}‡∂ö‡∑ä)

**‡∂∏‡∂≠‡∂ö ‡∂≠‡∂∂‡∑è ‡∂ú‡∂±‡∑ä‡∂±:** ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∑É‡∑Ñ ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ì ‡∂á‡∂≠‡∑í ‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫‡∂ß ‡∑É‡∑ì‡∂∏‡∑è ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.
"""


def build_summary_prompt(context: str, grade: str, query: str = "") -> str:
    grade_rules = {
        "6-8": "‡∂â‡∂≠‡∑è‡∂∏ ‡∑É‡∂ª‡∂Ω ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∂ö‡∑ô‡∂ß‡∑í ‡∑É‡∂ª‡∂Ω ‡∑Ä‡∑è‡∂ö‡∑ä‚Äç‡∂∫. ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂Ö‡∂Ø‡∑Ñ‡∑è ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
        "9-11": "‡∑É‡∂ª‡∂Ω ‡∂±‡∂∏‡∑î‡∂≠‡∑ä ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω. ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
        "12-13": "‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω. ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∑Ä‡∑ê‡∂Ø‡∂ú‡∂≠‡∑ä ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∑É‡∂Ç‡∂ö‡∂Ω‡∑ä‡∂¥ ‡∂ú‡∑ê‡∂π‡∑î‡∂ª‡∑í‡∂±‡∑ä ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.",
        "university": "‡∂ã‡∑É‡∑É‡∑ä ‡∂Ö‡∂∞‡∑ä‚Äç‡∂∫‡∂∫‡∂± ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω. ‡∂ú‡∑ê‡∂π‡∑î‡∂ª‡∑î ‡∑Ä‡∑í‡∑Å‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∂±‡∑ä‚Äç‡∂∫‡∑è‡∂∫‡∑è‡∂≠‡∑ä‡∂∏‡∂ö ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂≠‡∑è ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂±."
    }
    
    rule = grade_rules.get(grade, "‡∑É‡∂ª‡∂Ω ‡∂±‡∂∏‡∑î‡∂≠‡∑ä ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω. ‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂¥‡∑ê‡∑Ñ‡∑ê‡∂Ø‡∑í‡∂Ω‡∑í ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.")
    
    query_part = f"‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏: {query}\n\n" if query else ""
    
    return f"""
‡∂¥‡∑Ñ‡∂≠ **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂¥‡∑è‡∂©‡∂∏‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä** ‡∂∏‡∂≠ ‡∂¥‡∂Ø‡∂±‡∂∏‡∑ä‡∑Ä ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫‡∂ö‡∑ä ‡∑É‡∑è‡∂Ø‡∂±‡∑ä‡∂±.

{query_part}
üîí **‡∂±‡∑í‡∂∫‡∂∏:**
1. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä ‡∑Ä‡∂Ω ‡∂á‡∂≠‡∑í ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫ ‡∂¥‡∂∏‡∂´‡∂ö‡∑ä** ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.
2. ‡∂±‡∑Ä ‡∂ö‡∂ª‡∑î‡∂´‡∑î, ‡∂Ö‡∂Ø‡∑Ñ‡∑è, ‡∑Ñ‡∑ù ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∑Ñ‡∂≥‡∑î‡∂±‡∑ä‡∑Ä‡∑è ‡∂±‡∑ú‡∂Ø‡∑ô‡∂±‡∑ä‡∂±.
3. {rule}
4. **‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä ‡∑Ä‡∂Ω ‡∂±‡∑ú‡∂∏‡∑ê‡∂≠‡∑í ‡∂ö‡∂ª‡∑î‡∂´‡∑î ‡∂ú‡∑ê‡∂± ‡∑É‡∂≥‡∑Ñ‡∂±‡∑ä ‡∂±‡∑ú‡∂ö‡∂ª‡∂±‡∑ä‡∂±**.

**‡∂≠‡∑ù‡∂ª‡∑è‡∂ú‡∂≠‡∑ä ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠ ‡∂ö‡∑ú‡∂ß‡∑É‡∑ä:**
{context}

**‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫:**
"""